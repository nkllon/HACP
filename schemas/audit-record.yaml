%YAML 1.2
---
# HACP Audit Record Schema
$schema: http://json-schema.org/draft-07/schema#
title: Audit Record
description: A comprehensive record of the collaboration execution.
type: object
required:
  - audit_id
  - task_id
  - timestamp
  - events
  - final_status
properties:
  audit_id:
    type: string
    description: Unique identifier for this audit record.
  task_id:
    type: string
    description: Reference to the Task Manifest.
  timestamp:
    type: string
    format: date-time
    description: Time when the audit record was finalized.
  final_status:
    type: string
    enum: [Completed, Aborted, Rejected, Failed]
  model_identity:
    $ref: "./model-identity.yaml"
    description: Identity of the AI system involved (if single primary agent).
  events:
    type: array
    items:
      type: object
      required:
        - type
        - timestamp
        - source
      properties:
        type:
          type: string
          enum: [Proposal, Decision, Action, Escalation, Approval, Refusal]
        timestamp:
          type: string
          format: date-time
        source:
          type: string
          description: Agent or Human ID who generated the event.
        details:
          type: object
          description: Event-specific payload (e.g., proposal content, approval comment).
        confidence:
          type: number
          minimum: 0.0
          maximum: 1.0
          description: AI confidence score, if applicable.
